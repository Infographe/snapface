"use strict";(self.webpackChunksnapface=self.webpackChunksnapface||[]).push([[965],{965:(L,h,i)=>{i.r(h),i.d(h,{FaceSnapsModule:()=>I});var p=i(6895),c=i(433),r=i(6771),l=i(8505),n=i(8256),S=i(3900),d=i(4004),m=i(529);let u=(()=>{class e{constructor(t){this.http=t}getAllFaceSnaps(){return this.http.get("http://localhost:3000/facesnaps")}getFaceSnapById(t){return this.http.get(`http://localhost:3000/facesnaps/${t}`)}snapFaceSnapById(t,a){return this.getFaceSnapById(t).pipe((0,d.U)(s=>({...s,snaps:s.snaps+("snap"===a?1:-1)})),(0,S.w)(s=>this.http.put(`http://localhost:3000/facesnaps/${t}`,s)))}addFaceSnap(t){return this.getAllFaceSnaps().pipe((0,d.U)(a=>[...a].sort((s,f)=>s.id-f.id)),(0,d.U)(a=>a[a.length-1]),(0,d.U)(a=>({...t,snaps:0,createdDate:new Date,id:a.id+1})),(0,S.w)(a=>this.http.post("http://localhost:3000/facesnaps",a)))}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(m.eN))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function x(e,o){if(1&e&&(n.TgZ(0,"p"),n._uU(1),n.qZA()),2&e){const t=n.oxw().ngIf;n.xp6(1),n.hij("Photo prise \xe0 ",t.location,"")}}const _=function(e){return{snapped:e}},C=function(e){return{color:e}};function O(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"div",1)(1,"h2"),n._uU(2),n.ALo(3,"titlecase"),n.qZA(),n.TgZ(4,"a",2),n._uU(5,"Back"),n.qZA(),n.TgZ(6,"p"),n._uU(7),n.ALo(8,"date"),n.qZA(),n._UZ(9,"img",3),n.TgZ(10,"p"),n._uU(11),n.qZA(),n.YNc(12,x,2,1,"p",4),n.TgZ(13,"p")(14,"button",5),n.NdJ("click",function(){const f=n.CHM(t).ngIf,q=n.oxw();return n.KtG(q.onSnap(f.id))}),n._uU(15),n.qZA(),n.TgZ(16,"span",6),n._uU(17),n.qZA()()()}if(2&e){const t=o.ngIf,a=n.oxw();n.Q6J("ngClass",n.VKq(15,_,"Oops, un Snap!"===a.buttonText)),n.xp6(2),n.Oqu(n.lcZ(3,10,t.title)),n.xp6(5),n.hij("Mise en ligne ",n.xi3(8,12,t.createdDate,"\xe0 HH:mm, le dd MMMM yyyy "),""),n.xp6(2),n.Q6J("src",t.imageUrl,n.LSH)("alt",t.title),n.xp6(2),n.Oqu(t.description),n.xp6(1),n.Q6J("ngIf",t.location),n.xp6(3),n.Oqu(a.buttonText),n.xp6(1),n.Q6J("ngStyle",n.VKq(17,C,"rgb(0,"+t.snaps+", 0)")),n.xp6(1),n.hij("\u{1f90c} ",t.snaps,"")}}let F=(()=>{class e{constructor(t,a){this.faceSnapsService=t,this.route=a}ngOnInit(){this.faceSnap$=this.faceSnapsService.getFaceSnapById(+this.route.snapshot.params.id),this.buttonText="Oh Snap!"}onSnap(t){this.faceSnap$="Oh Snap!"===this.buttonText?this.faceSnapsService.snapFaceSnapById(t,"snap").pipe((0,l.b)(()=>this.buttonText="Oops, un Snap!")):this.faceSnapsService.snapFaceSnapById(t,"unsnap").pipe((0,l.b)(()=>this.buttonText="Oh Snap!"))}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(u),n.Y36(r.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-single-face-snap"]],decls:2,vars:3,consts:[["class","face-snap-card",3,"ngClass",4,"ngIf"],[1,"face-snap-card",3,"ngClass"],["routerLink","/facesnaps"],[3,"src","alt"],[4,"ngIf"],[3,"click"],[3,"ngStyle"]],template:function(t,a){1&t&&(n.YNc(0,O,18,19,"div",0),n.ALo(1,"async")),2&t&&n.Q6J("ngIf",n.lcZ(1,1,a.faceSnap$))},dependencies:[p.mk,p.O5,p.PC,r.yS,p.Ov,p.rS,p.uU],styles:[".face-snap-card[_ngcontent-%COMP%]{width:50%;margin:20px auto;padding:15px 30px;box-shadow:#d3d3d3 4px 4px 20px;border-radius:5px}.face-snap-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.face-snap-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}.face-snap-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300;font-size:16px;margin:5px 0}.face-snap-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;margin:15px 20px 5px 0;padding:5px 10px;border:none;box-shadow:#d3d3d3 3px 3px 7px;outline:none;font-size:14px;font-weight:500;cursor:pointer;transition:.2s linear}.face-snap-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .face-snap-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translate(1px,1px);box-shadow:#d3d3d3 0 0 5px}.snapped[_ngcontent-%COMP%]{background-color:#90ee9066;color:#006400}.snapped[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:#90ee90 3px 3px 7px;color:#006400}.snapped[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .snapped[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{box-shadow:#90ee90 0 0 5px}"]}),e})();const v=function(e){return{snapped:e}};let M=(()=>{class e{constructor(t,a){this.faceSnapsService=t,this.router=a}ngOnInit(){this.buttonText="Oh Snap!"}onSnap(){"Oh Snap!"===this.buttonText?(this.faceSnapsService.snapFaceSnapById(this.faceSnap.id,"snap"),this.buttonText="Oops, un Snap!"):(this.faceSnapsService.snapFaceSnapById(this.faceSnap.id,"unsnap"),this.buttonText="Oh Snap!")}onViewFaceSnap(){this.router.navigateByUrl(`facesnaps/${this.faceSnap.id}`)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(u),n.Y36(r.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-face-snap"]],inputs:{faceSnap:"faceSnap"},decls:8,vars:7,consts:[[1,"face-snap-card",3,"ngClass"],[3,"click"]],template:function(t,a){1&t&&(n.TgZ(0,"div",0)(1,"h2"),n._uU(2),n.ALo(3,"titlecase"),n.qZA(),n.TgZ(4,"p"),n._uU(5),n.qZA(),n.TgZ(6,"button",1),n.NdJ("click",function(){return a.onViewFaceSnap()}),n._uU(7,"View"),n.qZA()()),2&t&&(n.Q6J("ngClass",n.VKq(5,v,"Oops, un Snap!"===a.buttonText)),n.xp6(2),n.Oqu(n.lcZ(3,3,a.faceSnap.title)),n.xp6(3),n.Oqu(a.faceSnap.description))},dependencies:[p.mk,p.rS],styles:[".face-snap-card[_ngcontent-%COMP%]{width:50%;margin:20px auto;padding:15px 30px;box-shadow:#d3d3d3 4px 4px 20px;border-radius:5px}.face-snap-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.face-snap-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}.face-snap-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300;font-size:16px;margin:5px 0}.face-snap-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;margin:15px 20px 5px 0;padding:5px 10px;border:none;box-shadow:#d3d3d3 3px 3px 7px;outline:none;font-size:14px;font-weight:500;cursor:pointer;transition:.2s linear}.face-snap-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .face-snap-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translate(1px,1px);box-shadow:#d3d3d3 0 0 5px}.snapped[_ngcontent-%COMP%]{background-color:#90ee9066;color:#006400}.snapped[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:#90ee90 3px 3px 7px;color:#006400}.snapped[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .snapped[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{box-shadow:#90ee90 0 0 5px}"]}),e})();function b(e,o){1&e&&n._UZ(0,"app-face-snap",1),2&e&&n.Q6J("faceSnap",o.$implicit)}let Z=(()=>{class e{constructor(t){this.faceSnapService=t}ngOnInit(){this.faceSnaps$=this.faceSnapService.getAllFaceSnaps()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(u))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-face-snap-list"]],decls:2,vars:3,consts:[[3,"faceSnap",4,"ngFor","ngForOf"],[3,"faceSnap"]],template:function(t,a){1&t&&(n.YNc(0,b,1,1,"app-face-snap",0),n.ALo(1,"async")),2&t&&n.Q6J("ngForOf",n.lcZ(1,1,a.faceSnaps$))},dependencies:[p.sg,M,p.Ov]}),e})();function P(e,o){if(1&e&&(n.TgZ(0,"p"),n._uU(1),n.qZA()),2&e){const t=n.oxw().ngIf;n.xp6(1),n.hij("Photo prise \xe0 ",t.location,"")}}function w(e,o){if(1&e&&(n.TgZ(0,"div",14)(1,"h2"),n._uU(2),n.ALo(3,"titlecase"),n.qZA(),n.TgZ(4,"p"),n._uU(5),n.ALo(6,"date"),n.qZA(),n._UZ(7,"img",15),n.TgZ(8,"p"),n._uU(9),n.qZA(),n.YNc(10,P,2,1,"p",16),n.qZA()),2&e){const t=o.ngIf;n.xp6(2),n.Oqu(n.lcZ(3,6,t.title)),n.xp6(3),n.hij("Mise en ligne ",n.xi3(6,8,t.createdDate,"\xe0 HH:mm, le dd MMMM yyyy "),""),n.xp6(2),n.Q6J("src",t.imageUrl,n.LSH)("alt",t.title),n.xp6(2),n.Oqu(t.description),n.xp6(1),n.Q6J("ngIf",t.location)}}let y=(()=>{class e{constructor(t,a,s){this.formBuilder=t,this.faceSnapService=a,this.router=s}ngOnInit(){this.urlRegex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)/,this.snapForm=this.formBuilder.group({title:[null,c.kI.required],description:[null,c.kI.required],imageUrl:[null,[c.kI.required,c.kI.pattern(this.urlRegex)]],location:[null]},{updateOn:"blur"}),this.faceSnapPreview$=this.snapForm.valueChanges.pipe((0,d.U)(t=>({...t,createdDate:new Date,id:0,snaps:0})))}onSubmitForm(){this.faceSnapService.addFaceSnap(this.snapForm.value).pipe((0,l.b)(()=>this.router.navigateByUrl("/facesnaps"))).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(c.qu),n.Y36(u),n.Y36(r.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-new-face-snap"]],decls:25,vars:5,consts:[[1,"form-card"],[3,"formGroup"],[1,"form-group"],["for","title"],["type","text","id","title","formControlName","title"],["for","description"],["type","text","id","description","formControlName","description","rows","4"],["for","imageUrl"],["type","text","id","imageUrl","formControlName","imageUrl"],["for","location"],["type","text","id","location","formControlName","location"],[1,"action-buttons"],["type","submit",3,"disabled","click"],["class","face-snap-card",4,"ngIf"],[1,"face-snap-card"],[3,"src","alt"],[4,"ngIf"]],template:function(t,a){1&t&&(n.TgZ(0,"div",0)(1,"h2"),n._uU(2,"Nouveau SnapFace"),n.qZA(),n.TgZ(3,"form",1)(4,"div",2)(5,"label",3),n._uU(6,"Titre"),n.qZA(),n._UZ(7,"input",4),n.qZA(),n.TgZ(8,"div",2)(9,"label",5),n._uU(10,"Description"),n.qZA(),n._UZ(11,"textarea",6),n.qZA(),n.TgZ(12,"div",2)(13,"label",7),n._uU(14,"URL de l'image"),n.qZA(),n._UZ(15,"input",8),n.qZA(),n.TgZ(16,"div",2)(17,"label",9),n._uU(18,"Lieu"),n.qZA(),n._UZ(19,"input",10),n.qZA(),n.TgZ(20,"div",11)(21,"button",12),n.NdJ("click",function(){return a.onSubmitForm()}),n._uU(22,"envoyer"),n.qZA()()()(),n.YNc(23,w,11,11,"div",13),n.ALo(24,"async")),2&t&&(n.xp6(3),n.Q6J("formGroup",a.snapForm),n.xp6(18),n.Q6J("disabled",a.snapForm.invalid),n.xp6(2),n.Q6J("ngIf",n.lcZ(24,3,a.faceSnapPreview$)))},dependencies:[p.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,p.Ov,p.rS,p.uU],styles:[".form-card[_ngcontent-%COMP%], .face-snap-card[_ngcontent-%COMP%]{width:50%;margin:20px auto;padding:10px 30px;box-shadow:#d3d3d3 4px 4px 20px}.face-snap-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.face-snap-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0}.face-snap-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300;font-size:16px}.form-group[_ngcontent-%COMP%]{margin:10px auto;width:80%;display:flex;justify-content:space-between;align-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:50%;text-align:center}.action-buttons[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{border:none;padding:5px 10px;margin:20px auto;box-shadow:#d3d3d3 3px 3px 7px;color:#333}button[_ngcontent-%COMP%]:active{box-shadow:#d3d3d3 0 0 5px}"]}),e})();var A=i(263);let g=(()=>{class e{constructor(t,a){this.auth=t,this.router=a}canActivate(t,a){return!!this.auth.getToken()||(this.router.navigateByUrl("/auth/login"),!1)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(A.e),n.LFG(r.F0))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const T=[{path:"create",component:y,canActivate:[g]},{path:":id",component:F,canActivate:[g]},{path:"",component:Z,canActivate:[g]}];let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[r.Bz.forChild(T),r.Bz]}),e})(),I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[p.ez,c.UX,U]}),e})()}}]);